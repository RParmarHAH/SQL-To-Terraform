for i, sql_contents in enumerate(sql_contents_list):
    main = python_terraform(sql_contents)
#     print(sql_contents)   
    
    database_match = re.search( r"DATABASE_NAME\s*=\s*(\w+)", sql_contents , re.IGNORECASE | re.DOTALL)

    # Extract the DATABASE_NAME value from the match object
    if database_match:
        database_value = database_match.group(1)
        
        output_folder = os.path.join(current_directory, 'Terraform_Files', database_value,'Schema')

        try:
            os.makedirs(output_folder, exist_ok=True)
        except Exception as e:
            print(f"An error occurred while creating the output folder: {e}")

        for i, sql_contents in enumerate(sql_contents_list):
            main = python_terraform(sql_contents)

            for i in resource_File_Format_name_list:
                resource_name = i 
                output_filename = os.path.join(output_folder, f"{resource_name}.tf")

            try:
                with open(output_filename, 'w') as tf_file:
                    tf_file.write(main)
            except Exception as e:
                print(f"An error occurred while writing the output file: {e}")
